<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="utf-8">
  <title>Connexion</title>
  <link rel="stylesheet" href="../static/css/login.css">
  <link rel="icon" type="image/x-icon" href="../static/favicon.png">
  <script type="module">
    // Helper function to set a cookie with a given name, value, and expiration in days.
    function setCookie(name, value, days) {
      let expires = "";
      if (days) {
        const date = new Date();
        date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
        expires = "; expires=" + date.toUTCString();
      }
      document.cookie = name + "=" + (value || "") + expires + "; path=/";
    }

    // Function to read the username from the input and set the cookie.
    function setUsernameCookie() {
      const usernameInput = document.getElementById("username");
      const username = usernameInput.value;
      // Set the "username" cookie for 7 days.
      setCookie("username", username, 7);
      console.log("Username cookie set:", document.cookie);
    }

    // Bind the click event to the submit button after the DOM is loaded.
    document.addEventListener('DOMContentLoaded', () => {
      const submitButton = document.querySelector('button[type="submit"]');
      submitButton.addEventListener('click', setUsernameCookie);
    });
  </script>
</head>

<body>
  <div class="login-container">
    <h1>Connexion</h1>
    <form action="/login" method="POST">
      <label for="username">Nom d'utilisateur</label>
      <input type="text" id="username" name="username" placeholder="Entrez votre nom d'utilisateur" required>
      <label for="password">Mot de passe</label>
      <input type="password" id="password" name="password" placeholder="Entrez votre mot de passe" required>
      <button type="submit">Se connecter</button>
    </form>
  </div>
</body>

</html>